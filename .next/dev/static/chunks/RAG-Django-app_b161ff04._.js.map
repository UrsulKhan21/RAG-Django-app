{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/abdur/Downloads/django-project-with-google-auth/RAG-Django-app/lib/api-client.ts"],"sourcesContent":["const BACKEND_URL_KEY = \"rag_backend_url\"\r\nconst DEFAULT_BACKEND = \"http://localhost:8000\"\r\n\r\nfunction getBackendUrl(): string {\r\n  if (typeof window === \"undefined\") return DEFAULT_BACKEND\r\n  return localStorage.getItem(BACKEND_URL_KEY) || DEFAULT_BACKEND\r\n}\r\n\r\nexport async function apiRequest<T>(\r\n  endpoint: string,\r\n  options: RequestInit = {}\r\n): Promise<T> {\r\n  const backendUrl = getBackendUrl()\r\n  const url = `${backendUrl}${endpoint}`\r\n\r\n  const res = await fetch(url, {\r\n    ...options,\r\n    credentials: \"include\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      ...options.headers,\r\n    },\r\n  })\r\n\r\n  if (!res.ok) {\r\n    const errorData = await res.json().catch(() => ({}))\r\n    throw new Error(errorData.detail || errorData.error || `Request failed: ${res.status}`)\r\n  }\r\n\r\n  return res.json()\r\n}\r\n\r\nexport interface ApiSource {\r\n  id: number\r\n  name: string\r\n  api_url: string\r\n  api_key: string\r\n  headers: Record<string, string>\r\n  data_path: string\r\n  status: \"pending\" | \"ingesting\" | \"ready\" | \"error\"\r\n  document_count: number\r\n  last_synced: string | null\r\n  created_at: string\r\n}\r\n\r\nexport interface ChatMessage {\r\n  id?: number\r\n  role: \"user\" | \"assistant\"\r\n  content: string\r\n  sources?: string[]\r\n  created_at?: string\r\n}\r\n\r\nexport interface ChatSession {\r\n  id: number\r\n  title: string\r\n  api_source: number\r\n  api_source_name: string\r\n  created_at: string\r\n  updated_at: string\r\n}\r\n\r\n// API Source endpoints\r\nexport const apiSources = {\r\n  list: () => apiRequest<ApiSource[]>(\"/api/sources/\"),\r\n  create: (data: Partial<ApiSource>) =>\r\n    apiRequest<ApiSource>(\"/api/sources/\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    }),\r\n  delete: (id: number) =>\r\n    apiRequest(`/api/sources/${id}/`, { method: \"DELETE\" }),\r\n  ingest: (id: number) =>\r\n    apiRequest<{ status: string }>(`/api/sources/${id}/ingest/`, {\r\n      method: \"POST\",\r\n    }),\r\n  sync: (id: number) =>\r\n    apiRequest<{ status: string }>(`/api/sources/${id}/sync/`, {\r\n      method: \"POST\",\r\n    }),\r\n}\r\n\r\n// Chat endpoints\r\nexport const chatApi = {\r\n  sessions: (sourceId: number) =>\r\n    apiRequest<ChatSession[]>(`/api/chat/sessions/?source=${sourceId}`),\r\n  createSession: (sourceId: number, title: string) =>\r\n    apiRequest<ChatSession>(\"/api/chat/sessions/\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ api_source: sourceId, title }),\r\n    }),\r\n  messages: (sessionId: number) =>\r\n    apiRequest<ChatMessage[]>(`/api/chat/sessions/${sessionId}/messages/`),\r\n  sendMessage: (sessionId: number, content: string, topK: number = 5) =>\r\n    apiRequest<ChatMessage>(`/api/chat/sessions/${sessionId}/query/`, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ question: content, top_k: topK }),\r\n    }),\r\n  deleteSession: (sessionId: number) =>\r\n    apiRequest(`/api/chat/sessions/${sessionId}/`, { method: \"DELETE\" }),\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA,MAAM,kBAAkB;AACxB,MAAM,kBAAkB;AAExB,SAAS;IACP;;IACA,OAAO,aAAa,OAAO,CAAC,oBAAoB;AAClD;AAEO,eAAe,WACpB,QAAgB,EAChB,UAAuB,CAAC,CAAC;IAEzB,MAAM,aAAa;IACnB,MAAM,MAAM,GAAG,aAAa,UAAU;IAEtC,MAAM,MAAM,MAAM,MAAM,KAAK;QAC3B,GAAG,OAAO;QACV,aAAa;QACb,SAAS;YACP,gBAAgB;YAChB,GAAG,QAAQ,OAAO;QACpB;IACF;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,YAAY,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QAClD,MAAM,IAAI,MAAM,UAAU,MAAM,IAAI,UAAU,KAAK,IAAI,CAAC,gBAAgB,EAAE,IAAI,MAAM,EAAE;IACxF;IAEA,OAAO,IAAI,IAAI;AACjB;AAiCO,MAAM,aAAa;IACxB,MAAM,IAAM,WAAwB;IACpC,QAAQ,CAAC,OACP,WAAsB,iBAAiB;YACrC,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;QACvB;IACF,QAAQ,CAAC,KACP,WAAW,CAAC,aAAa,EAAE,GAAG,CAAC,CAAC,EAAE;YAAE,QAAQ;QAAS;IACvD,QAAQ,CAAC,KACP,WAA+B,CAAC,aAAa,EAAE,GAAG,QAAQ,CAAC,EAAE;YAC3D,QAAQ;QACV;IACF,MAAM,CAAC,KACL,WAA+B,CAAC,aAAa,EAAE,GAAG,MAAM,CAAC,EAAE;YACzD,QAAQ;QACV;AACJ;AAGO,MAAM,UAAU;IACrB,UAAU,CAAC,WACT,WAA0B,CAAC,2BAA2B,EAAE,UAAU;IACpE,eAAe,CAAC,UAAkB,QAChC,WAAwB,uBAAuB;YAC7C,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;gBAAE,YAAY;gBAAU;YAAM;QACrD;IACF,UAAU,CAAC,YACT,WAA0B,CAAC,mBAAmB,EAAE,UAAU,UAAU,CAAC;IACvE,aAAa,CAAC,WAAmB,SAAiB,OAAe,CAAC,GAChE,WAAwB,CAAC,mBAAmB,EAAE,UAAU,OAAO,CAAC,EAAE;YAChE,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;gBAAE,UAAU;gBAAS,OAAO;YAAK;QACxD;IACF,eAAe,CAAC,YACd,WAAW,CAAC,mBAAmB,EAAE,UAAU,CAAC,CAAC,EAAE;YAAE,QAAQ;QAAS;AACtE"}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/abdur/Downloads/django-project-with-google-auth/RAG-Django-app/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n        outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3\",\r\n        lg: \"h-11 rounded-md px-8\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,kMAAG,EACxB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aAAa;YACb,SAAS;YACT,WAAW;YACX,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,mMAAgB,MAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,mMAAI,GAAG;IAC9B,qBACE,qNAAC;QACC,WAAW,IAAA,6IAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 147, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/abdur/Downloads/django-project-with-google-auth/RAG-Django-app/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, React.InputHTMLAttributes<HTMLInputElement>>(\r\n  ({ className, type, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,mMAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,qNAAC;QACC,MAAM;QACN,WAAW,IAAA,6IAAE,EACX,qXACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/abdur/Downloads/django-project-with-google-auth/RAG-Django-app/components/ui/select.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Select = SelectPrimitive.Root\r\nconst SelectGroup = SelectPrimitive.Group\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\r\n    {...props}\r\n  >\r\n    <ChevronUp className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n))\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\r\n    {...props}\r\n  >\r\n    <ChevronDown className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n))\r\nSelectScrollDownButton.displayName = SelectPrimitive.ScrollDownButton.displayName\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => (\r\n  <SelectPrimitive.Portal>\r\n    <SelectPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        position === \"popper\" && \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n        className\r\n      )}\r\n      position={position}\r\n      {...props}\r\n    >\r\n      <SelectScrollUpButton />\r\n      <SelectPrimitive.Viewport\r\n        className={cn(\r\n          \"p-1\",\r\n          position === \"popper\" && \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\r\n        )}\r\n      >\r\n        {children}\r\n      </SelectPrimitive.Viewport>\r\n      <SelectScrollDownButton />\r\n    </SelectPrimitive.Content>\r\n  </SelectPrimitive.Portal>\r\n))\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label ref={ref} className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)} {...props} />\r\n))\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator ref={ref} className={cn(\"-mx-1 my-1 h-px bg-muted\", className)} {...props} />\r\n))\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,qMAAoB;AACnC,MAAM,cAAc,sMAAqB;AACzC,MAAM,cAAc,sMAAqB;AAEzC,MAAM,8BAAgB,mMAAgB,MAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,qNAAC,wMAAuB;QACtB,KAAK;QACL,WAAW,IAAA,6IAAE,EACX,mTACA;QAED,GAAG,KAAK;;YAER;0BACD,qNAAC,qMAAoB;gBAAC,OAAO;0BAC3B,cAAA,qNAAC,8PAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,wMAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,mMAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qNAAC,+MAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,6IAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBAET,cAAA,qNAAC,wPAAS;YAAC,WAAU;;;;;;;;;;;MATnB;AAYN,qBAAqB,WAAW,GAAG,+MAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,mMAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qNAAC,iNAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,6IAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBAET,cAAA,qNAAC,8PAAW;YAAC,WAAU;;;;;;;;;;;MATrB;AAYN,uBAAuB,WAAW,GAAG,iNAAgC,CAAC,WAAW;AAEjF,MAAM,8BAAgB,mMAAgB,OAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,qNAAC,uMAAsB;kBACrB,cAAA,qNAAC,wMAAuB;YACtB,KAAK;YACL,WAAW,IAAA,6IAAE,EACX,qdACA,aAAa,YAAY,mIACzB;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,qNAAC;;;;;8BACD,qNAAC,yMAAwB;oBACvB,WAAW,IAAA,6IAAE,EACX,OACA,aAAa,YAAY;8BAG1B;;;;;;8BAEH,qNAAC;;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,wMAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,mMAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qNAAC,sMAAqB;QAAC,KAAK;QAAK,WAAW,IAAA,6IAAE,EAAC,0CAA0C;QAAa,GAAG,KAAK;;;;;;;AAEhH,YAAY,WAAW,GAAG,sMAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,mMAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,qNAAC,qMAAoB;QACnB,KAAK;QACL,WAAW,IAAA,6IAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BAET,qNAAC;gBAAK,WAAU;0BACd,cAAA,qNAAC,8MAA6B;8BAC5B,cAAA,qNAAC,wOAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGrB,qNAAC,yMAAwB;0BAAE;;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,qMAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,mMAAgB,QAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qNAAC,0MAAyB;QAAC,KAAK;QAAK,WAAW,IAAA,6IAAE,EAAC,4BAA4B;QAAa,GAAG,KAAK;;;;;;;AAEtG,gBAAgB,WAAW,GAAG,0MAAyB,CAAC,WAAW"}},
    {"offset": {"line": 405, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/abdur/Downloads/django-project-with-google-auth/RAG-Django-app/app/dashboard/chat/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState, useRef, Suspense } from \"react\"\r\nimport { useSearchParams } from \"next/navigation\"\r\nimport {\r\n  apiSources,\r\n  chatApi,\r\n  type ApiSource,\r\n  type ChatSession,\r\n  type ChatMessage,\r\n} from \"@/lib/api-client\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\"\r\nimport {\r\n  MessageSquare,\r\n  Send,\r\n  Plus,\r\n  Trash2,\r\n  Globe,\r\n  Bot,\r\n  User,\r\n} from \"lucide-react\"\r\nimport { toast } from \"sonner\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction ChatPageContent() {\r\n  const searchParams = useSearchParams()\r\n  const initialSourceId = searchParams.get(\"source\")\r\n\r\n  const [sources, setSources] = useState<ApiSource[]>([])\r\n  const [selectedSourceId, setSelectedSourceId] = useState<string>(initialSourceId || \"\")\r\n  const [sessions, setSessions] = useState<ChatSession[]>([])\r\n  const [activeSession, setActiveSession] = useState<ChatSession | null>(null)\r\n  const [messages, setMessages] = useState<ChatMessage[]>([])\r\n  const [input, setInput] = useState(\"\")\r\n  const [sending, setSending] = useState(false)\r\n\r\n  const messagesEndRef = useRef<HTMLDivElement>(null)\r\n\r\n  useEffect(() => {\r\n    loadSources()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (selectedSourceId) loadSessions(Number(selectedSourceId))\r\n    else {\r\n      setSessions([])\r\n      setActiveSession(null)\r\n      setMessages([])\r\n    }\r\n  }, [selectedSourceId])\r\n\r\n  useEffect(() => {\r\n    if (activeSession) loadMessages(activeSession.id)\r\n    else setMessages([])\r\n  }, [activeSession])\r\n\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\r\n  }, [messages, sending])\r\n\r\n  const loadSources = async () => {\r\n    try {\r\n      const data = await apiSources.list()\r\n      setSources(data.filter((s) => s.status === \"ready\"))\r\n    } catch {\r\n      toast.error(\"Failed to load sources\")\r\n    }\r\n  }\r\n\r\n  const loadSessions = async (sourceId: number) => {\r\n    try {\r\n      const data = await chatApi.sessions(sourceId)\r\n      setSessions(data)\r\n      setActiveSession(data[0] || null)\r\n    } catch {\r\n      setSessions([])\r\n    }\r\n  }\r\n\r\n  const loadMessages = async (sessionId: number) => {\r\n    try {\r\n      const data = await chatApi.messages(sessionId)\r\n      setMessages(data)\r\n    } catch {\r\n      setMessages([])\r\n    }\r\n  }\r\n\r\n  const createSession = async () => {\r\n    if (!selectedSourceId) return toast.error(\"Select a source first\")\r\n    const session = await chatApi.createSession(Number(selectedSourceId), \"New Chat\")\r\n    setSessions((prev) => [session, ...prev])\r\n    setActiveSession(session)\r\n  }\r\n\r\n  const deleteSession = async (id: number) => {\r\n    await chatApi.deleteSession(id)\r\n    const updated = sessions.filter((s) => s.id !== id)\r\n    setSessions(updated)\r\n    if (activeSession?.id === id) setActiveSession(updated[0] || null)\r\n  }\r\n\r\n  const sendMessage = async () => {\r\n    if (!input.trim() || !activeSession || sending) return\r\n\r\n    const question = input.trim()\r\n    setInput(\"\")\r\n    setSending(true)\r\n\r\n    const tempUserMsg: ChatMessage = { role: \"user\", content: question }\r\n    setMessages((prev) => [...prev, tempUserMsg])\r\n\r\n    try {\r\n      const response = await chatApi.sendMessage(activeSession.id, question)\r\n      setMessages((prev) => [...prev, response])\r\n    } catch {\r\n      setMessages((prev) => [\r\n        ...prev,\r\n        { role: \"assistant\", content: \"Something went wrong.\" },\r\n      ])\r\n    } finally {\r\n      setSending(false)\r\n    }\r\n  }\r\n\r\n  const selectedSource = sources.find((s) => s.id === Number(selectedSourceId))\r\n\r\n  return (\r\n    <div className=\"flex h-[calc(100vh-140px)] gap-6\">\r\n\r\n      {/* SESSION PANEL */}\r\n      <div className=\"hidden w-64 flex-col rounded-2xl border bg-background p-4 md:flex\">\r\n        <div className=\"mb-4 flex items-center justify-between\">\r\n          <p className=\"text-sm font-semibold\">Sessions</p>\r\n          <Button size=\"icon\" variant=\"ghost\" onClick={createSession}>\r\n            <Plus className=\"h-4 w-4\" />\r\n          </Button>\r\n        </div>\r\n\r\n        <div className=\"flex flex-1 flex-col gap-1 overflow-y-auto\">\r\n          {sessions.map((session) => (\r\n            <div\r\n              key={session.id}\r\n              onClick={() => setActiveSession(session)}\r\n              className={cn(\r\n                \"group cursor-pointer rounded-xl px-3 py-2 text-sm transition\",\r\n                activeSession?.id === session.id\r\n                  ? \"bg-primary/10 text-primary\"\r\n                  : \"text-muted-foreground hover:bg-muted\"\r\n              )}\r\n            >\r\n              <div className=\"flex items-center justify-between\">\r\n                <span className=\"truncate\">{session.title}</span>\r\n                <Trash2\r\n                  onClick={(e) => {\r\n                    e.stopPropagation()\r\n                    deleteSession(session.id)\r\n                  }}\r\n                  className=\"h-3 w-3 opacity-0 group-hover:opacity-100\"\r\n                />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* CHAT AREA */}\r\n      <div className=\"flex flex-1 flex-col rounded-2xl border bg-background shadow-sm\">\r\n\r\n        {/* HEADER */}\r\n        <div className=\"flex items-center justify-between border-b px-6 py-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Select value={selectedSourceId} onValueChange={setSelectedSourceId}>\r\n              <SelectTrigger className=\"w-64\">\r\n                <SelectValue placeholder=\"Select source\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                {sources.map((source) => (\r\n                  <SelectItem key={source.id} value={String(source.id)}>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Globe className=\"h-3.5 w-3.5\" />\r\n                      {source.name}\r\n                    </div>\r\n                  </SelectItem>\r\n                ))}\r\n              </SelectContent>\r\n            </Select>\r\n\r\n            {selectedSource && (\r\n              <span className=\"text-xs text-muted-foreground\">\r\n                {selectedSource.document_count} docs\r\n              </span>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* MESSAGES */}\r\n        <div className=\"flex-1 overflow-y-auto px-8 py-6 space-y-6 bg-muted/10\">\r\n          {messages.length === 0 ? (\r\n            <div className=\"flex h-full flex-col items-center justify-center text-center\">\r\n              <Bot className=\"mb-4 h-10 w-10 text-muted-foreground/40\" />\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Ask something about your indexed data.\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            messages.map((msg, i) => (\r\n              <div\r\n                key={i}\r\n                className={cn(\r\n                  \"flex gap-3\",\r\n                  msg.role === \"user\" ? \"justify-end\" : \"justify-start\"\r\n                )}\r\n              >\r\n                {msg.role === \"assistant\" && (\r\n                  <div className=\"h-8 w-8 rounded-lg bg-primary/10 flex items-center justify-center\">\r\n                    <Bot className=\"h-4 w-4 text-primary\" />\r\n                  </div>\r\n                )}\r\n\r\n                <div\r\n                  className={cn(\r\n                    \"max-w-[65%] rounded-2xl px-5 py-3 text-sm leading-relaxed shadow-sm\",\r\n                    msg.role === \"user\"\r\n                      ? \"bg-primary text-primary-foreground\"\r\n                      : \"bg-background border\"\r\n                  )}\r\n                >\r\n                  {msg.content}\r\n                </div>\r\n\r\n                {msg.role === \"user\" && (\r\n                  <div className=\"h-8 w-8 rounded-lg bg-secondary flex items-center justify-center\">\r\n                    <User className=\"h-4 w-4 text-muted-foreground\" />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))\r\n          )}\r\n\r\n          {sending && (\r\n            <div className=\"flex gap-3\">\r\n              <div className=\"h-8 w-8 rounded-lg bg-primary/10 flex items-center justify-center\">\r\n                <Bot className=\"h-4 w-4 text-primary\" />\r\n              </div>\r\n              <div className=\"rounded-2xl border px-5 py-3 text-sm\">\r\n                Thinking...\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n\r\n        {/* INPUT */}\r\n        <div className=\"border-t px-6 py-4 bg-background\">\r\n          <form\r\n            onSubmit={(e) => {\r\n              e.preventDefault()\r\n              sendMessage()\r\n            }}\r\n            className=\"flex gap-3\"\r\n          >\r\n            <Input\r\n              value={input}\r\n              onChange={(e) => setInput(e.target.value)}\r\n              placeholder=\"Ask a question...\"\r\n              disabled={sending}\r\n              className=\"flex-1 rounded-xl\"\r\n            />\r\n            <Button type=\"submit\" disabled={!input.trim() || sending}>\r\n              <Send className=\"h-4 w-4\" />\r\n            </Button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default function ChatPage() {\r\n  return (\r\n    <Suspense fallback={<div className=\"flex h-[calc(100vh-140px)] items-center justify-center\">Loading...</div>}>\r\n      <ChatPageContent />\r\n    </Suspense>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}